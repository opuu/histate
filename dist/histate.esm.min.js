export default class Histate{constructor(t){this.saveState=t.saveState,this.name=t.name,this.watch=t.watch,this.methods=t.methods.call(this),null===this.state&&(this.state=t.state?t.state:null)}get state(){return this.saveState?JSON.parse(window.localStorage.getItem(this.name)):JSON.parse(window.sessionStorage.getItem(this.name))}set state(t){if("object"!=typeof t)console.error("State must be an object.");else{let e=t,s=this.state,a={...s,...e};this.saveState?window.localStorage.setItem(this.name,JSON.stringify(a)):window.sessionStorage.setItem(this.name,JSON.stringify(a));let i={oldState:s,newState:a,newData:e};this.watch.call(i)}}getState(){return this.state}setState(t){return this.state=t}}